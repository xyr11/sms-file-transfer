<!-- Basically all of our UI -->
<html><meta name="viewport"content="width=device-width"><body><style>body{font-family:Arial;background:#fed}#o,#i{width:100%}i{background-color:#7c7;padding:2px}</style><p>A</p><input type="file"onchange="a(this)"><input id="o"><hr><p>B</p><input id="i"><i onclick="b()">Ok</i><a id="x"></a>
<script>
var
// Constant variables -------------------
// Variables used on loops
i,j,
// Return var
r,
// Character assigned to this version of SFT
v='@',
// Variable for basic math operations
m=Math,

// Tiny functions -----------------------
// Get document elements by their ID
c=x=>document.getElementById(x),
// window.alert()
d=x=>alert(x),
// Split each characters in the string to an array
e=a=>a.split(''),
// Math.log()
f=n=>m.log(n),
// Output download link
g=c('x'),

// Characters split into an array:
// Base64
h=e('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='),
// Base120
k=e(`@£$¥èéùìòÇØøÅåΔ_ΦΓΛΩΠΨΣΘΞÆæßÉ!"#¤%&'()*+,-./0123456789:;<=>?¡ABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÑÜ§¿abcdefghijklmnopqrstuvwxyzä`),
// Special characters
l=e('àüñö'),

// Medium functions ---------------------
/**
 * Decimal to Base-n encoder
 * @param a The decimal number
 * @param y The characters used on Base-n
 */
n=(a,b=l)=>{
  // The "n" in Base-n
  y=b.length;

  // Determine how many 'digits' the output have
  q=m.floor(f(a)/f(y))+1;

  // Output
  r='';
  for(j=0; j<q; j++)
    r=b[m.floor(a/(y**j)%y)]+r; // it works
  return r
},
/**
 * Base-n to Decimal encoder
 * @param a The Base-n string
 * @param y The decimal number
 */
o=(x,y=l)=>{
  r=0;
  for(j in x)
    r+=y.indexOf(x[x.length-j-1])*(y.length**j); // it also works
  return r
},
p,q,s,t,u,v,w,x,y,z

// Main functions -----------------------
// Input
a=x=>{
// Function variables
p=x.files;

// check if user selected more than 1 file
if(p.length>1)d('1FileOnly');
else{
s=new window.FileReader()
s.onload=y=>{
z=y.target.result
if (x.size>5000){d('TooBig')}else{
  // compression algorithm
  z=z

  /*
// Step 1 -------------------
//  Remove the `data:` part, aka the first 5 characters
z=z.slice(5).split(';')

// Step 0 -------------------
//  Adds version identifier
// Step 2 -------------------
//  Replaces the following terms in the first string:
//    image/       -> à
//    application/ -> ü
// Step 3 -------------------
//  Remove the `base64,` part, aka the first 7 characters after the semicolon
// Splits the string into 2 from the comma
z=(v+z[0].replace(/image\//,'à').replace(/application\//,'ü')+';'+z[1].slice(7)).split(';')

// Step 4 -------------------

// Part 1 -----
// Compress repeating characters
u=1,  // This is the counter for the repeated characters
w='',  // This is the cache for the previous character
t='' // This is the output/compressed string

// Check for each character
for(i of z[1]){
  // Check if the previous character is the same as the current character
  if(i==w)u++; // if it is, add 1 to the counter of that repeated character
  else{ // if it isn't
    u>1&&(t+=n(u-1)); // if there is a repeated character before, add the count to the output string
    t+=i; // add the character to the output string
    u=1 // reset the counter
  }
  w=i // store previous letter
}
u>0&&(t+=n(u-1)); // if the last character is a repeated character, add the count to the output string

// Part 2 -----
// ...

console.log(z.join(';')) //test
   */
  c('o').value=z;
  d('y')
}
}
s.readAsDataURL(p[0])
}}

// output
var b=()=>{
// decompression algorithm
var x=c('i').value

g.download=Date.now()
g.href=x
g.click()
}
</script>